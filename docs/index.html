<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dasbor Keuangan</title>
    <link rel="stylesheet" href="minimalist.css">
</head>
<body>
    <!-- Navigation -->
    <nav id="navbar">
        <div class="logo">
            <span class="logo-text">Dasbor Keuangan</span>
        </div>
        <ul class="nav-links">
            <li><a href="balance.html">Neraca</a></li>
            <li><a href="income.html">Laba Rugi</a></li>
            <li><a href="cashflow.html">Arus Kas</a></li>
            <li><a href="register.html">Register Transaksi</a></li>
        </ul>
    </nav>

    <!-- Dashboard Section -->
    <section class="dashboard-section" id="dashboard">
        <h2 class="section-title">Ikhtisar Dasbor</h2>
        <!-- Stats Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-title">Total Aset</div>
                <div class="stat-value" id="total-assets">Memuat...</div>
            </div>

            <div class="stat-card">
                <div class="stat-title">Total Kewajiban</div>
                <div class="stat-value" id="total-liabilities">Memuat...</div>
            </div>

            <div class="stat-card">
                <div class="stat-title">Total Pendapatan</div>
                <div class="stat-value" id="total-income">Memuat...</div>
            </div>

            <div class="stat-card">
                <div class="stat-title">Total Pengeluaran</div>
                <div class="stat-value" id="total-expenses">Memuat...</div>
            </div>
        </div>
    </section>

    <!-- Reports Section -->
    <section class="reports-section" id="reports">
        <h2 class="section-title">Laporan & Wawasan</h2>
        <div class="info-grid">
            <div class="info-card">
                <h3 class="info-title">Neraca Bulanan</h3>
                <a href="balance-monthly.html" class="link">Lihat</a>
            </div>
            <div class="info-card">
                <h3 class="info-title">Aset Bulanan</h3>
                <a href="assets-monthly.html" class="link">Lihat</a>
            </div>
            <div class="info-card">
                <h3 class="info-title">Pendapatan Bulanan</h3>
                <a href="income-monthly.html" class="link">Lihat</a>
            </div>
            <div class="info-card">
                <h3 class="info-title">Pengeluaran Bulanan</h3>
                <a href="expenses-monthly.html" class="link">Lihat</a>
            </div>
            <div class="info-card">
                <h3 class="info-title">Duit Cair Aman Bulanan</h3>
                <a href="balance-ass-lia-monthly.html" class="link">Lihat</a>
            </div>
            <div class="info-card">
                <h3 class="info-title">Balance Sheet Bulanan</h3>
                <a href="balancesheet-monthly.html" class="link">Lihat</a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <p class="copyright">Â© 2025 Dasbor Keuangan. Semua hak dilindungi undang-undang.</p>
    </footer>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const formatCurrency = (amount, decimalPlaces) => {
            const number = amount / (10 ** decimalPlaces);
            return new Intl.NumberFormat(
                'id-ID',
                { style: 'currency',
                  currency: 'IDR'
                }
            ).format(number);
        };

        const fetchData = async () => {
            try {
                const [
                    assetsRes,
                    liabilitiesRes,
                    incomeRes,
                    expensesRes
                ] = await Promise.all([
                    fetch('data/balance-assets.json'),
                    fetch('data/balance-liabilities.json'),
                    fetch('data/income.json'),
                    fetch('data/expenses.json')
                ]);

                const assetsData      = await assetsRes.json();
                const liabilitiesData = await liabilitiesRes.json();
                const incomeData      = await incomeRes.json();
                const expensesData    = await expensesRes.json();

                const totalAssets      = assetsData[1][0].aquantity;
                const totalLiabilities = liabilitiesData[1][0].aquantity;
                const totalIncome      = incomeData[1][0].aquantity;
                const totalExpenses    = expensesData[1][0].aquantity;

                const setTotal = (elemId, asset) => {
                    document.getElementById(elemId).textContent =
                        formatCurrency(asset.decimalMantissa, asset.decimalPlaces);
                }
                setTotal('total-assets', totalAssets);
                setTotal('total-liabilities', totalLiabilities);
                setTotal('total-income', totalIncome);
                setTotal('total-expenses', totalExpenses);
            } catch (error) {
                console.error("Error fetching data:", error);
            }
        };

        fetchData();
    });
</script>
</body>
</html>
